!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const e={init(){window.Telegram&&window.Telegram.WebApp&&(window.Telegram.WebApp.ready(),window.Telegram.WebApp.expand())},getUser:()=>window.Telegram&&window.Telegram.WebApp&&window.Telegram.WebApp.initDataUnsafe?window.Telegram.WebApp.initDataUnsafe.user:null,sendData(e){window.Telegram&&window.Telegram.WebApp&&window.Telegram.WebApp.sendData(JSON.stringify(e))},showAlert(e){window.Telegram&&window.Telegram.WebApp?window.Telegram.WebApp.showAlert(e):alert(e)}},t={formatCurrency:e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"ETB",minimumFractionDigits:2}).format(e),formatTimeAgo(e){const t=Date.now(),n=Math.round((t-e)/1e3),a=Math.round(n/60),s=Math.round(a/60),i=Math.round(s/24);return n<60?`${n}s ago`:a<60?`${a}m ago`:s<24?`${s}h ago`:i<30?`${i}d ago`:new Date(e).toLocaleDateString()}};class n{constructor(){this.user=null,this.transactions=[],this.init()}init(){e.init(),this.user=e.getUser(),this.setupEventListeners(),this.updateUI(),this.hideLoadingScreen()}setupEventListeners(){const e=document.getElementById("capture-payment-btn"),t=document.getElementById("view-transactions-btn"),n=document.getElementById("upload-statement-btn"),a=document.getElementById("analytics-btn");e&&e.addEventListener("click",()=>this.handleCapturePayment()),t&&t.addEventListener("click",()=>this.handleViewTransactions()),n&&n.addEventListener("click",()=>this.handleUploadStatement()),a&&a.addEventListener("click",()=>this.handleAnalytics());const s=document.getElementById("home-btn"),i=document.getElementById("transactions-nav-btn"),r=document.getElementById("profile-btn");s&&s.addEventListener("click",()=>this.showHome()),i&&i.addEventListener("click",()=>this.handleViewTransactions()),r&&r.addEventListener("click",()=>this.showProfile())}updateUI(){this.updateUserInfo(),this.loadSampleTransactions()}updateUserInfo(){const e=document.getElementById("user-name"),t=document.getElementById("user-avatar");this.user?(e&&(e.textContent=`Welcome, ${this.user.first_name||"User"}!`),t&&(t.textContent=(this.user.first_name||"U").charAt(0).toUpperCase())):(e&&(e.textContent="Welcome back!"),t&&(t.textContent="U"))}loadSampleTransactions(){this.transactions=[{id:"tx1",amount:150,bank_name:"Dashen Bank",receipt_number:"DB12345",created_at:Date.now()-36e5,status:"completed"},{id:"tx2",amount:200.5,bank_name:"CBE",receipt_number:"CBE67890",created_at:Date.now()-72e5,status:"completed"},{id:"tx3",amount:75.25,bank_name:"Telebirr",receipt_number:"TB11223",created_at:Date.now()-108e5,status:"pending"}],this.renderTransactions()}renderTransactions(){const e=document.getElementById("transactions-container");e&&(0!==this.transactions.length?e.innerHTML=this.transactions.map(e=>`\n      <div class="bg-white rounded-lg p-4 mb-3 shadow-sm border">\n        <div class="flex items-center justify-between">\n          <div class="flex items-center space-x-3">\n            <div class="w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center">\n              <span class="text-white font-semibold text-sm">${e.bank_name.charAt(0)}</span>\n            </div>\n            <div>\n              <div class="font-semibold text-gray-900">${t.formatCurrency(e.amount)}</div>\n              <div class="text-sm text-gray-600">${e.bank_name}</div>\n            </div>\n          </div>\n          <div class="text-right">\n            <div class="text-xs text-gray-500">${t.formatTimeAgo(e.created_at)}</div>\n            <div class="text-xs ${"completed"===e.status?"text-green-600":"text-yellow-600"}">\n              ${e.status}\n            </div>\n          </div>\n        </div>\n        <div class="mt-2 text-xs text-gray-500">\n          Ref: ${e.receipt_number}\n        </div>\n      </div>\n    `).join(""):e.innerHTML='\n        <div class="text-center py-8">\n          <p class="text-gray-500">No transactions yet</p>\n          <p class="text-sm text-gray-400">Start capturing payments to see them here</p>\n        </div>\n      ')}hideLoadingScreen(){const e=document.getElementById("loading-screen"),t=document.getElementById("app");e&&(e.style.display="none"),t&&(t.style.opacity="1")}handleCapturePayment(){var t;e.sendData({action:"capture_payment",user_id:null==(t=this.user)?void 0:t.id}),e.showAlert("Opening payment capture...")}handleViewTransactions(){var t;e.sendData({action:"view_transactions",user_id:null==(t=this.user)?void 0:t.id}),e.showAlert("Loading transactions...")}handleUploadStatement(){var t;e.sendData({action:"upload_statement",user_id:null==(t=this.user)?void 0:t.id}),e.showAlert("Opening statement upload...")}handleAnalytics(){window.location.href="analytics.html"}showHome(){this.updateUI()}showProfile(){e.showAlert("Profile feature coming soon!")}}document.addEventListener("DOMContentLoaded",()=>{new n}),window.VeriPayApp=n;
//# sourceMappingURL=main-24a7095b.js.map
